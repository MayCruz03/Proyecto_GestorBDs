({clases:{menuItem:"server-obj",menuItemList:"obj-list-items",toggleContentButton:"btn-toggle-content"},objectsKeys:{database:10002,schema:10003},serverObjectsTypes:[],serverObjectsList:[],serverObjectsMenuContainer:"#frm-server-objects-menu",createMenuItem(e,t,s,i,n=[]){const a=this,o=`<div class="item ${this.clases.menuItem}" data-objTypeId="${e}" data-objId="${t}" data-toggleContent="1">\n                <i class="minus  teal icon ${this.clases.toggleContentButton}"></i>\n                <i class="${i} icon"></i>\n                <div class="content">\n                    <div class="header">${s}</div>\n                    <div class="list ${this.clases.menuItemList}"></div>\n                </div>\n            </div>`,c=$(o);return n.forEach((e=>{c.find(`.${this.clases.menuItemList}`).append(e)})),c.find(`.${this.clases.toggleContentButton}`).on("click",(function(e){e.stopPropagation();const t=$(this).parents(`.${a.clases.menuItem}`).eq(0),s=t.attr("data-toggleContent");$(this).removeClass(["minus","plus"]),0==s?($(t).find(`.${a.clases.menuItemList}`).eq(0).show(),t.attr("data-toggleContent",1),$(this).addClass("minus")):($(t).find(`.${a.clases.menuItemList}`).eq(0).hide(),t.attr("data-toggleContent",0),$(this).addClass("plus"))})),c},async fillServerObjectsTypes(){const e=this;await $.ajax({url:"data/server-objects.json",method:"GET",dataType:"JSON",success(t){e.serverObjectsTypes=t},error(t){e.serverObjectsTypes=[]}})},async fillServerObjectsList(){const e=this;await $.ajax({url:"data/server-list-objects.json",method:"GET",dataType:"JSON",success(t){e.serverObjectsList=t},error(t){e.serverObjectsList=[]}})},initEvents(){$("#top-tool-bar, #frm-server-objects-menu").find(".ui.dropdown").dropdown(),$("[data-content]").popup(),$(".btn-toggle-menu[data-toggle]").on("click",(function(){const e=parseInt($(this).attr("data-toggle"));$('#frm-server-objects-menu [data-objtypeid="10002"] .obj-list-items .server-obj').attr("data-togglecontent",e),$('#frm-server-objects-menu [data-objtypeid="10002"] .obj-list-items .btn-toggle-content').trigger("click")}))},async init(){await this.fillServerObjectsTypes(),await this.fillServerObjectsList(),$(this.serverObjectsMenuContainer).empty();let e=this.serverObjectsTypes.filter((e=>e.objectParent==this.objectsKeys.database));this.serverObjectsList.filter((e=>e.objectTypeId==this.objectsKeys.database)).forEach((t=>{const s=this.createMenuItem(t.objectTypeId,t.objectId,t.objectName,"database");$(this.serverObjectsMenuContainer).append(s);const i=`.${this.clases.menuItem}[data-objTypeId="${t.objectTypeId}"][data-objId="${t.objectId}"] .${this.clases.menuItemList}`;console.log(i),e.forEach((e=>{let s=this.serverObjectsList.filter((s=>s.objectTypeId==e.objectId&&s.parentOf==t.objectId));s=s.map((t=>{console.log(t.objectId,this.objectsKeys.schema);let s=t.objectId==this.objectsKeys.schema?t.schema:`${t.schema??""}.${t.objectName}`;return`<div class="item">\n                            <i class="${e.objectIcon} icon"></i>\n                            <div class="content"><div class="description">${s}</div></div>\n                        </div>`})),0==s.length&&s.push('<div class="item">\n                            <div class="content">\n                                <div class="description"><i>Carpeta Vacia</i></div>\n                            </div>\n                        </div>');const n=this.createMenuItem(e.objectId,e.objectId,e.objectName,"yellow folder",s);$(i).eq(0).append(n)})),$(i).find(`.${this.clases.toggleContentButton}`).trigger("click")})),this.initEvents()}}).init();